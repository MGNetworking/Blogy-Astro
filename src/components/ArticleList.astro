---
import { getCollection } from 'astro:content';

// Cette ligne r√©cup√®re TOUS vos articles automatiquement
const articles = await getCollection('articles');

console.log(`Article ${articles.length}`)
---

<html>
  <head>
    <title>Liste des articles</title>
  </head>
  <body class="py-20 bg-gray-800 text-white">
    <div class="max-w-4xl mx-auto px-4">
      <h1 class="text-4xl font-bold mb-8">Tous mes articles ({articles.length})</h1>

      <div class="space-y-6">
        {articles.map((article) => (
          <article class="bg-gray-700 p-6 rounded-lg">
            <!-- Titre cliquable -->
            <h2 class="text-2xl font-bold mb-2">
              <a 
                href={`/article/${article.id}`}
                class="text-blue-400 hover:text-blue-300"
              >
                {article.data?.title || article.id}
              </a>
            </h2>

            <!-- M√©tadonn√©es -->
            <div class="text-gray-300 mb-4 space-y-1">
              {article.data?.author && (
                <p>‚úçÔ∏è Par : <span class="font-semibold">{article.data.author}</span></p>
              )}
              
              {article.data?.date && (
                <p>üìÖ Date : {article.data.date}</p>
              )}
              
              {article.data?.tags && article.data.tags.length > 0 && (
                <p>üè∑Ô∏è Tags : 
                  {article.data.tags.map((tag: string, index: number) => (
                    <span key={tag} class="bg-blue-600 px-2 py-1 rounded text-sm ml-1">
                      {tag}
                    </span>
                  ))}
                </p>
              )}
            </div>

            <!-- Description -->
            {article.data?.description && (
              <p class="text-gray-200 mb-4">{article.data.description}</p>
            )}

            <!-- Lien "Lire la suite" -->
            <a 
              href={`/article/${article.id}`}
              class="inline-block bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-white font-medium"
            >
              Lire l'article ‚Üí
            </a>
          </article>
        ))}
      </div>
    </div>
  </body>
</html>