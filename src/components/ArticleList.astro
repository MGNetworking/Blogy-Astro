---
import { getGithubArticles } from "../services/github.js";

const mdFiles = await getGithubArticles();

const articles = mdFiles.map((file) => ({
  id: file.metadata.name.replace(".md", ""),
  title: file.metadata.title,
  author: file.metadata.author,
  date: file.metadata.date,
  description: file.metadata.description,
  tags: file.metadata.tags,
}));
---

<html>
  <head>
    <title>Mes articles</title>
  </head>
  <body class="py-20 bg-gray-800 text-white">
    <div class="max-w-4xl mx-auto px-4">
      <h1 class="text-4xl font-bold mb-8">
        Mes articles ({articles.length})
      </h1>

      <div class="space-y-6">
        {
          articles.map((article) => (
            <article class="bg-gray-700 p-6 rounded-lg">
              <h2 class="text-2xl font-bold mb-2">
                <a
                  href={`/article/${article.id}`}
                  class="text-blue-400 hover:text-blue-300"
                >
                  {article.title}
                </a>
              </h2>

              <div class="text-gray-300 mb-4">
                {article.author && <p>‚úçÔ∏è Par : {article.author}</p>}
                {article.date && <p>üìÖ Date : {article.date}</p>}
              </div>

              {article.description && (
                <p class="text-gray-200 mb-4">{article.description}</p>
              )}

              <a
                href={`/article/${article.id}`}
                class="inline-block bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-white"
              >
                Lire l'article ‚Üí
              </a>
            </article>
          ))
        }
      </div>
    </div>
  </body>
</html>
