---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import ArtComponent from "../../components/art.astro";

// IMPORTANT : "export" au début !
export async function getStaticPaths() {
  const articles = await getCollection("articles");

  // Ce log visible dans le TERMINAL pendant la compilation et dev uniquement
  console.log("Compilation:", articles.length, "articles trouvés");

  return articles.map((article) => ({
    params: { slug: article.id },
  }));
}

const { slug } = Astro.params;
---

<Layout title="Article">
  <ArtComponent slug={slug} />
</Layout>
