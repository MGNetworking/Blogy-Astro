---
import Layout from "../../layouts/Layout.astro";
import ArtComponent from "../../components/article.astro";
import { getGithubArticles } from "../../services/github.js";

export async function getStaticPaths() {
  // Récupération SEULEMENT de l'index JSON (léger)
  const mdFiles = await getGithubArticles();

  // Retourne JUSTE les slugs pour créer les pages
  return mdFiles.map((file: any) => ({
    params: {
      slug: file.metadata.filename.replace(".md", ""),
    },
  }));
}

const { slug } = Astro.params;
---

<Layout title="Article">
  <ArtComponent slug={slug} />
</Layout>
